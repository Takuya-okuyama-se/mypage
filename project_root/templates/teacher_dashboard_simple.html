{% extends "base.html" %}
{% block title %}講師ダッシュボード | 塾講師サイト{% endblock %}
{% block head_extra %}
<style>
  .dashboard-container {
    padding: 20px;
    max-width: 1200px;
    margin: 0 auto;
  }
  
  .dashboard-header {
    background: #f8f9fa;
    padding: 20px;
    border-radius: 8px;
    margin-bottom: 20px;
    border: 1px solid #dee2e6;
  }
  
  .dashboard-title {
    color: #333;
    margin-bottom: 10px;
    font-size: 24px;
  }
  
  .stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
    margin-bottom: 30px;
  }
  
  .stat-card {
    background: white;
    padding: 20px;
    border-radius: 8px;
    border: 1px solid #dee2e6;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  }
  
  .stat-label {
    color: #666;
    font-size: 14px;
    margin-bottom: 5px;
  }
  
  .stat-value {
    font-size: 32px;
    font-weight: bold;
    color: #333;
  }
  
  .functions-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 15px;
    margin-bottom: 30px;
  }
  
  .function-link {
    display: block;
    background: white;
    padding: 20px;
    border-radius: 8px;
    border: 1px solid #dee2e6;
    text-decoration: none;
    color: #333;
    transition: all 0.3s ease;
    text-align: center;
  }
  
  .function-link:hover {
    background: #f8f9fa;
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    text-decoration: none;
    color: #333;
  }
  
  .function-icon {
    font-size: 32px;
    color: #4361ee;
    margin-bottom: 10px;
  }
  
  .function-title {
    font-weight: 600;
    margin-bottom: 5px;
  }
  
  .function-desc {
    font-size: 12px;
    color: #666;
  }
  
  .students-section {
    background: white;
    padding: 20px;
    border-radius: 8px;
    border: 1px solid #dee2e6;
  }
  
  .students-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    padding-bottom: 15px;
    border-bottom: 1px solid #dee2e6;
  }
  
  .students-title {
    font-size: 20px;
    color: #333;
    margin: 0;
  }
  
  .search-input {
    padding: 8px 12px;
    border: 1px solid #ccc;
    border-radius: 4px;
    width: 200px;
  }
  
  .tabs {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
    flex-wrap: wrap;
  }
  
  .tab {
    padding: 8px 16px;
    background: #f8f9fa;
    border: 1px solid #dee2e6;
    border-radius: 4px;
    cursor: pointer;
    font-size: 14px;
    transition: all 0.3s ease;
    text-decoration: none;
  }
  
  .tab:hover {
    background: #e9ecef;
  }
  
  .tab.active {
    background: #4361ee;
    color: white;
    border-color: #4361ee;
  }
  
  .students-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 15px;
  }
  
  .student-card {
    background: white;
    border: 1px solid #dee2e6;
    border-radius: 8px;
    padding: 15px;
    transition: all 0.3s ease;
  }
  
  .student-card:hover {
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    transform: translateY(-2px);
  }
  
  .student-name {
    font-weight: 600;
    margin-bottom: 5px;
    color: #333;
  }
  
  .student-grade {
    color: #666;
    font-size: 14px;
    margin-bottom: 10px;
  }
  
  .student-actions {
    display: flex;
    gap: 8px;
    margin-top: 10px;
  }
  
  .btn-small {
    padding: 6px 12px;
    font-size: 12px;
    border-radius: 4px;
    text-decoration: none;
    cursor: pointer;
    border: none;
    transition: all 0.3s ease;
  }
  
  .btn-primary {
    background: #4361ee;
    color: white;
  }
  
  .btn-primary:hover {
    background: #3a0ca3;
    color: white;
    text-decoration: none;
  }
  
  .btn-secondary {
    background: #6c757d;
    color: white;
  }
  
  .btn-secondary:hover {
    background: #545b62;
    color: white;
    text-decoration: none;
  }
</style>
{% endblock %}

{% block content %}
<div class="dashboard-container">
  <!-- ダッシュボードヘッダー -->
  <div class="dashboard-header">
    <h2 class="dashboard-title">講師ダッシュボード</h2>
    <p>こんにちは、{{ name }}先生。今日も生徒たちの成長をサポートしましょう。</p>
  </div>

  <!-- 統計概要 -->
  <div class="stats-grid">
    <div class="stat-card">
      <div class="stat-label">登録生徒数</div>
      <div class="stat-value">{{ student_count or 0 }}</div>
    </div>

    <div class="stat-card">
      <div class="stat-label">今月の模試</div>
      <div class="stat-value">2</div>
      <small>次回：5/20</small>
    </div>

    <div class="stat-card">
      <div class="stat-label">出席率</div>
      <div class="stat-value">94%</div>
    </div>

    <div class="stat-card">
      <div class="stat-label">新規登録</div>
      <div class="stat-value">3</div>
      <small>今月</small>
    </div>
  </div>

  <!-- 主な機能 -->
  <div class="functions-grid">
    <a href="/myapp/index.cgi/teacher/points" class="function-link">
      <div class="function-icon">
        <i class="fas fa-coins"></i>
      </div>
      <div class="function-title">ポイント管理</div>
      <div class="function-desc">生徒のポイントを管理</div>
    </a>

    <a href="/myapp/index.cgi/teacher/attendance" class="function-link">
      <div class="function-icon">
        <i class="fas fa-check-circle"></i>
      </div>
      <div class="function-title">出席管理</div>
      <div class="function-desc">出席を確認</div>
    </a>

    <a href="/myapp/index.cgi/admin/fetch-high-schools" class="function-link">
      <div class="function-icon">
        <i class="fas fa-school"></i>
      </div>
      <div class="function-title">高校情報</div>
      <div class="function-desc">高校データを取得</div>
    </a>

    <a href="/myapp/index.cgi/teacher/crane-game-credits" class="function-link">
      <div class="function-icon">
        <i class="fas fa-gamepad"></i>
      </div>
      <div class="function-title">ゲーム管理</div>
      <div class="function-desc">クレーンゲーム</div>
    </a>

    <a href="/myapp/index.cgi/teacher/manual-score" class="function-link">
      <div class="function-icon">
        <i class="fas fa-edit"></i>
      </div>
      <div class="function-title">成績入力</div>
      <div class="function-desc">点数を登録</div>
    </a>

    <a href="/myapp/index.cgi/teacher/homework" class="function-link">
      <div class="function-icon">
        <i class="fas fa-book"></i>
      </div>
      <div class="function-title">宿題管理</div>
      <div class="function-desc">宿題を管理</div>
    </a>
  </div>

  <!-- 生徒一覧 -->
  <div class="students-section">
    <div class="students-header">
      <h3 class="students-title">生徒一覧</h3>
      <input type="text" class="search-input" placeholder="生徒名で検索" id="student-search">
    </div>

    <!-- タブ -->
    <div class="tabs">
      <div class="tab active" data-grade="all">全学年</div>
      <div class="tab" data-grade="elementary">小学生</div>
      <div class="tab" data-grade="middle">中学生</div>
      <div class="tab" data-grade="high">高校生</div>
    </div>

    <!-- 生徒グリッド -->
    <div class="students-grid" id="student-list">
      <!-- 生徒カードは動的に生成されます -->
      <div class="student-card">
        <div class="student-name">テスト太郎</div>
        <div class="student-grade">中学3年</div>
        <div class="student-actions">
          <button class="btn-small btn-primary">出席</button>
          <button class="btn-small btn-secondary">詳細</button>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
// シンプルなJavaScript
document.addEventListener('DOMContentLoaded', function() {
  console.log('講師ダッシュボードが読み込まれました');
  
  // タブ切り替え
  const tabs = document.querySelectorAll('.tab');
  tabs.forEach(tab => {
    tab.addEventListener('click', function() {
      tabs.forEach(t => t.classList.remove('active'));
      this.classList.add('active');
      console.log('タブが切り替わりました:', this.textContent);
    });
  });
  
  // 検索機能
  const searchInput = document.getElementById('student-search');
  if (searchInput) {
    searchInput.addEventListener('input', function() {
      console.log('検索:', this.value);
    });
  }
  
  // ボタンクリックテスト
  const buttons = document.querySelectorAll('.btn-small');
  buttons.forEach(button => {
    button.addEventListener('click', function() {
      console.log('ボタンがクリックされました:', this.textContent);
      alert('ボタンがクリックされました: ' + this.textContent);
    });
  });
});
</script>
{% endblock %}
